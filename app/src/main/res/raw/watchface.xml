<?xml version="1.0" encoding="utf-8"?>
<!--
    Mugibow Watch Face - Watch Face Format (WFF) v2
    Compatible with Pixel Watch 2 and other Wear OS 4+ devices

    Required images (place in res/drawable/):
    - background.png      : 450x450px background image
    - background_ambient.png : 450x450px ambient mode background (optional, darker)
    - preview.png         : 450x450px preview for watch face picker
    - digit_0.png ~ digit_9.png : Custom digit images (same height recommended)
    - digit_colon.png     : Colon separator image

    Optional weather icons (place in res/drawable/):
    - weather_sunny.png, weather_cloudy.png, weather_rainy.png, etc.
-->
<WatchFace width="450" height="450" clipShape="CIRCLE">

    <!-- ========================================= -->
    <!-- BITMAP FONTS DEFINITION                   -->
    <!-- Custom image-based digits for the clock   -->
    <!-- ========================================= -->
    <BitmapFonts>
        <BitmapFont name="custom_digits">
            <!-- Digits 0-9 -->
            <Character name="0" resource="digit_0" width="60" height="100" />
            <Character name="1" resource="digit_1" width="60" height="100" />
            <Character name="2" resource="digit_2" width="60" height="100" />
            <Character name="3" resource="digit_3" width="60" height="100" />
            <Character name="4" resource="digit_4" width="60" height="100" />
            <Character name="5" resource="digit_5" width="60" height="100" />
            <Character name="6" resource="digit_6" width="60" height="100" />
            <Character name="7" resource="digit_7" width="60" height="100" />
            <Character name="8" resource="digit_8" width="60" height="100" />
            <Character name="9" resource="digit_9" width="60" height="100" />
            <!-- Separator -->
            <Character name=":" resource="digit_colon" width="30" height="100" />
        </BitmapFont>
    </BitmapFonts>

    <!-- ========================================= -->
    <!-- MAIN SCENE                                -->
    <!-- ========================================= -->
    <Scene>

        <!-- ===================================== -->
        <!-- BACKGROUND IMAGE                      -->
        <!-- ===================================== -->
        <PartImage x="0" y="0" width="450" height="450" name="Background">
            <Image resource="background" />
            <Variant mode="AMBIENT" target="alpha" value="128" />
        </PartImage>

        <!-- ===================================== -->
        <!-- WEATHER & TEMPERATURE (Top)           -->
        <!-- WFF v2 feature                        -->
        <!-- ===================================== -->
        <Group x="125" y="55" width="200" height="50" name="WeatherGroup">
            <!-- Weather condition text -->
            <PartText x="0" y="0" width="200" height="25" name="WeatherCondition">
                <Text align="CENTER">
                    <Font family="SYNC_TO_DEVICE" size="18" color="#87CEEB" />
                    <Template>
                        %s
                        <Parameter expression="[WEATHER.IS_AVAILABLE] ? [WEATHER.CONDITION_NAME] : '---'" />
                    </Template>
                </Text>
                <Variant mode="AMBIENT" target="alpha" value="150" />
            </PartText>

            <!-- Temperature -->
            <PartText x="0" y="25" width="200" height="25" name="Temperature">
                <Text align="CENTER">
                    <Font family="SYNC_TO_DEVICE" size="22" color="#FFFFFF" />
                    <Template>
                        %s
                        <Parameter expression="[WEATHER.IS_AVAILABLE] ? (round([WEATHER.TEMPERATURE]) + '°') : '--°'" />
                    </Template>
                </Text>
                <Variant mode="AMBIENT" target="alpha" value="150" />
            </PartText>
        </Group>

        <!-- ===================================== -->
        <!-- DIGITAL CLOCK (Center)                -->
        <!-- Using custom bitmap font              -->
        <!-- ===================================== -->
        <DigitalClock x="60" y="145" width="330" height="110">
            <TimeText
                x="0"
                y="0"
                width="330"
                height="100"
                format="HH:mm"
                hourFormat="SYNC_TO_DEVICE"
                align="CENTER">
                <BitmapFont family="custom_digits" size="100" />
            </TimeText>
            <Variant mode="AMBIENT" target="alpha" value="200" />
        </DigitalClock>

        <!-- ===================================== -->
        <!-- DATE DISPLAY                          -->
        <!-- ===================================== -->
        <PartText x="100" y="255" width="250" height="35" name="Date">
            <Text align="CENTER">
                <Font family="SYNC_TO_DEVICE" size="24" color="#FFFFFF" />
                <Template>
                    %s %d
                    <Parameter expression="[DAY_OF_WEEK_S]" />
                    <Parameter expression="[DAY]" />
                </Template>
            </Text>
            <Variant mode="AMBIENT" target="alpha" value="150" />
        </PartText>

        <!-- ===================================== -->
        <!-- STEP COUNT (Bottom Left)              -->
        <!-- ===================================== -->
        <Group x="45" y="300" width="110" height="60" name="StepCountGroup">
            <!-- Step icon label -->
            <PartText x="0" y="0" width="110" height="20" name="StepLabel">
                <Text align="CENTER">
                    <Font family="SYNC_TO_DEVICE" size="14" color="#90EE90" />
                    <Template>STEPS</Template>
                </Text>
                <Variant mode="AMBIENT" target="alpha" value="0" />
            </PartText>

            <!-- Step count value -->
            <PartText x="0" y="20" width="110" height="35" name="StepCount">
                <Text align="CENTER">
                    <Font family="SYNC_TO_DEVICE" size="22" color="#90EE90" />
                    <Template>
                        %d
                        <Parameter expression="[STEP_COUNT]" />
                    </Template>
                </Text>
                <Variant mode="AMBIENT" target="alpha" value="0" />
            </PartText>
        </Group>

        <!-- ===================================== -->
        <!-- HEART RATE (Bottom Center)            -->
        <!-- ===================================== -->
        <Group x="165" y="300" width="120" height="60" name="HeartRateGroup">
            <!-- Heart rate label -->
            <PartText x="0" y="0" width="120" height="20" name="HeartLabel">
                <Text align="CENTER">
                    <Font family="SYNC_TO_DEVICE" size="14" color="#FF6B6B" />
                    <Template>HEART</Template>
                </Text>
                <Variant mode="AMBIENT" target="alpha" value="0" />
            </PartText>

            <!-- Heart rate value -->
            <PartText x="0" y="20" width="120" height="35" name="HeartRate">
                <Text align="CENTER">
                    <Font family="SYNC_TO_DEVICE" size="22" color="#FF6B6B" />
                    <Template>
                        %s bpm
                        <Parameter expression="[HEART_RATE] > 0 ? [HEART_RATE] : '--'" />
                    </Template>
                </Text>
                <Variant mode="AMBIENT" target="alpha" value="0" />
            </PartText>
        </Group>

        <!-- ===================================== -->
        <!-- BATTERY (Bottom Right)                -->
        <!-- ===================================== -->
        <Group x="295" y="300" width="110" height="60" name="BatteryGroup">
            <!-- Battery label -->
            <PartText x="0" y="0" width="110" height="20" name="BatteryLabel">
                <Text align="CENTER">
                    <Font family="SYNC_TO_DEVICE" size="14" color="#FFD700" />
                    <Template>BATTERY</Template>
                </Text>
                <Variant mode="AMBIENT" target="alpha" value="0" />
            </PartText>

            <!-- Battery value -->
            <PartText x="0" y="20" width="110" height="35" name="BatteryValue">
                <Text align="CENTER">
                    <Font family="SYNC_TO_DEVICE" size="22" color="#FFD700" />
                    <Template>
                        %d%%
                        <Parameter expression="[BATTERY_PERCENT]" />
                    </Template>
                </Text>
                <Variant mode="AMBIENT" target="alpha" value="0" />
            </PartText>
        </Group>

        <!-- ===================================== -->
        <!-- STEP PROGRESS ARC (Optional)          -->
        <!-- Visual step goal progress indicator   -->
        <!-- ===================================== -->
        <PartDraw x="0" y="0" width="450" height="450" name="StepProgressArc">
            <!-- Background arc (track) -->
            <Arc
                x="25" y="25"
                width="400" height="400"
                startAngle="150"
                endAngle="210"
                direction="CLOCKWISE">
                <Stroke color="#333333" thickness="8" cap="ROUND" />
            </Arc>
            <!-- Progress arc -->
            <Arc
                x="25" y="25"
                width="400" height="400"
                startAngle="150"
                direction="CLOCKWISE">
                <Stroke color="#90EE90" thickness="8" cap="ROUND" />
                <!-- Progress based on step percentage (max 100%) -->
                <Transform target="endAngle" value="150 + (clamp([STEP_COUNT] / 10000.0, 0, 1) * 60)" />
            </Arc>
            <Variant mode="AMBIENT" target="alpha" value="0" />
        </PartDraw>

        <!-- ===================================== -->
        <!-- BATTERY PROGRESS ARC                  -->
        <!-- ===================================== -->
        <PartDraw x="0" y="0" width="450" height="450" name="BatteryProgressArc">
            <!-- Background arc (track) -->
            <Arc
                x="25" y="25"
                width="400" height="400"
                startAngle="330"
                endAngle="30"
                direction="CLOCKWISE">
                <Stroke color="#333333" thickness="8" cap="ROUND" />
            </Arc>
            <!-- Progress arc -->
            <Arc
                x="25" y="25"
                width="400" height="400"
                startAngle="330"
                direction="CLOCKWISE">
                <Stroke color="#FFD700" thickness="8" cap="ROUND" />
                <Transform target="endAngle" value="330 + ([BATTERY_PERCENT] / 100.0 * 60)" />
            </Arc>
            <Variant mode="AMBIENT" target="alpha" value="0" />
        </PartDraw>

    </Scene>

</WatchFace>
