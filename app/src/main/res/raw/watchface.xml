<?xml version="1.0" encoding="utf-8"?>
<!--
    Mugibow Watch Face - Watch Face Format (WFF) v2
    Compatible with Pixel Watch 2 and other Wear OS 4+ devices

    Using:
    - Custom digit images (digit_0.png ~ digit_9.png, digit_colon.png)
    - Fredoka font for text elements
-->
<WatchFace width="450" height="450" clipShape="CIRCLE">

    <!-- ========================================= -->
    <!-- BITMAP FONTS - Custom digit images        -->
    <!-- ========================================= -->
    <BitmapFonts>
        <BitmapFont name="custom_digits">
            <Character name="0" resource="digit_0" width="60" height="100" />
            <Character name="1" resource="digit_1" width="60" height="100" />
            <Character name="2" resource="digit_2" width="60" height="100" />
            <Character name="3" resource="digit_3" width="60" height="100" />
            <Character name="4" resource="digit_4" width="60" height="100" />
            <Character name="5" resource="digit_5" width="60" height="100" />
            <Character name="6" resource="digit_6" width="60" height="100" />
            <Character name="7" resource="digit_7" width="60" height="100" />
            <Character name="8" resource="digit_8" width="60" height="100" />
            <Character name="9" resource="digit_9" width="60" height="100" />
            <Character name=":" resource="digit_colon" width="60" height="100" />
        </BitmapFont>
        <!-- Weather condition icons (indexed by WEATHER.CONDITION value) -->
        <BitmapFont name="weather_icons">
            <Character name="0" resource="ic_unknown" width="96" height="96" />
            <Character name="1" resource="ic_sunny" width="96" height="96" />
            <Character name="2" resource="ic_clear" width="96" height="96" />
            <Character name="3" resource="ic_partly_cloudy_day" width="96" height="96" />
            <Character name="4" resource="ic_partly_cloudy_day" width="96" height="96" />
            <Character name="5" resource="ic_cloudy" width="96" height="96" />
            <Character name="6" resource="ic_rain" width="96" height="96" />
            <Character name="7" resource="ic_heavy_rain" width="96" height="96" />
            <Character name="8" resource="ic_snow" width="96" height="96" />
            <Character name="9" resource="ic_heavy_snow" width="96" height="96" />
            <Character name="A" resource="ic_thunderstorm" width="96" height="96" />
            <Character name="B" resource="ic_sleet" width="96" height="96" />
            <Character name="C" resource="ic_fog" width="96" height="96" />
            <Character name="D" resource="ic_windy" width="96" height="96" />
        </BitmapFont>
    </BitmapFonts>

    <Scene>

        <!-- BACKGROUND -->
        <PartImage x="0" y="0" width="450" height="450" name="Background">
            <Image resource="background" />
            <Variant mode="AMBIENT" target="alpha" value="100" />
        </PartImage>

        <!-- ===================================== -->
        <!-- TOP: Weather icon + temperature       -->
        <!-- ===================================== -->
        <Condition>
            <Expressions>
                <Expression name="weather_available">[WEATHER.IS_AVAILABLE]</Expression>
            </Expressions>
            <Compare expression="weather_available">
                <Case value="TRUE">
                    <!-- Weather icon using BitmapFont -->
                    <PartText x="130" y="30" width="96" height="50" name="WeatherIcon">
                        <Text align="CENTER">
                            <BitmapFont family="weather_icons" size="40" color="#FFFFFF">
                                <Template>%X<Parameter expression="clamp([WEATHER.CONDITION], 0, 13)" /></Template>
                            </BitmapFont>
                        </Text>
                        <Variant mode="AMBIENT" target="alpha" value="180" />
                    </PartText>
                    <!-- Temperature -->
                    <PartText x="210" y="40" width="130" height="50" name="WeatherTemp">
                        <Text align="START">
                            <Font family="fredoka" size="32" color="#FFFFFF">
                                <Template><![CDATA[%dÂ°C]]><Parameter expression="[WEATHER.TEMPERATURE]" /></Template>
                            </Font>
                        </Text>
                        <Variant mode="AMBIENT" target="alpha" value="180" />
                    </PartText>
                </Case>
            </Compare>
            <Default>
                <!-- Weather not available -->
                <PartText x="100" y="40" width="250" height="50" name="WeatherUnavailable">
                    <Text align="CENTER">
                        <Font family="fredoka" size="28" color="#888888">
                            <Template>--Â°C</Template>
                        </Font>
                    </Text>
                    <Variant mode="AMBIENT" target="alpha" value="180" />
                </PartText>
            </Default>
        </Condition>

        <!-- ===================================== -->
        <!-- CENTER: Digital Clock (PartText + BitmapFont) -->
        <!-- ===================================== -->
        <PartText x="0" y="130" width="450" height="130" name="Time">
            <Text align="CENTER">
                <BitmapFont family="custom_digits" size="120" color="#FFFFFF">
                    <Template>%02d:%02d<Parameter expression="[HOUR_0_23]" /><Parameter expression="[MINUTE]" /></Template>
                </BitmapFont>
            </Text>
            <Variant mode="AMBIENT" target="alpha" value="255" />
        </PartText>

        <!-- Date (Fredoka font) - Format: 2025/12/30 Tue -->
        <PartText x="50" y="265" width="350" height="50" name="Date">
            <Text align="CENTER">
                <Font family="fredoka" size="28" color="#FFFFFF">
                    <Template>
                        <![CDATA[%d/%02d/%02d %s]]>
                        <Parameter expression="[YEAR]" />
                        <Parameter expression="[MONTH]" />
                        <Parameter expression="[DAY]" />
                        <Parameter expression="[DAY_OF_WEEK_S]" />
                    </Template>
                </Font>
            </Text>
            <Variant mode="AMBIENT" target="alpha" value="180" />
        </PartText>

        <!-- ===================================== -->
        <!-- BOTTOM ROW: Step, Heart, Battery      -->
        <!-- (Fredoka font)                        -->
        <!-- ===================================== -->

        <!-- Step Count (left) -->
        <PartText x="50" y="330" width="110" height="50" name="Steps">
            <Text align="CENTER">
                <Font family="fredoka" size="22" color="#90EE90">
                    <Template><![CDATA[ðŸš¶%d]]><Parameter expression="[STEP_COUNT]" /></Template>
                </Font>
            </Text>
            <Variant mode="AMBIENT" target="alpha" value="0" />
        </PartText>

        <!-- Heart Rate (center) -->
        <PartText x="170" y="330" width="110" height="50" name="Heart">
            <Text align="CENTER">
                <Font family="fredoka" size="22" color="#FF6B6B">
                    <Template><![CDATA[â¤ï¸%d]]><Parameter expression="[HEART_RATE]" /></Template>
                </Font>
            </Text>
            <Variant mode="AMBIENT" target="alpha" value="0" />
        </PartText>

        <!-- Battery (right) -->
        <PartText x="290" y="330" width="110" height="50" name="Battery">
            <Text align="CENTER">
                <Font family="fredoka" size="22" color="#FFD700">
                    <Template><![CDATA[ðŸ”‹%d%%]]><Parameter expression="[BATTERY_PERCENT]" /></Template>
                </Font>
            </Text>
            <Variant mode="AMBIENT" target="alpha" value="0" />
        </PartText>

        <!-- ===================================== -->
        <!-- PROGRESS ARCS                         -->
        <!-- ===================================== -->

        <!-- Step Progress Arc -->
        <PartDraw x="0" y="0" width="450" height="450" name="StepArc">
            <Arc x="10" y="10" width="430" height="430"
                startAngle="135" endAngle="180" direction="CLOCKWISE">
                <Stroke color="#333333" thickness="10" cap="ROUND" />
            </Arc>
            <Arc x="10" y="10" width="430" height="430"
                startAngle="135" direction="CLOCKWISE">
                <Stroke color="#90EE90" thickness="10" cap="ROUND" />
                <Transform target="endAngle" value="135 + ([STEP_COUNT] / 10000.0) * 45" />
            </Arc>
            <Variant mode="AMBIENT" target="alpha" value="0" />
        </PartDraw>

        <!-- Battery Progress Arc -->
        <PartDraw x="0" y="0" width="450" height="450" name="BatteryArc">
            <Arc x="10" y="10" width="430" height="430"
                startAngle="0" endAngle="45" direction="CLOCKWISE">
                <Stroke color="#333333" thickness="10" cap="ROUND" />
            </Arc>
            <Arc x="10" y="10" width="430" height="430"
                startAngle="0" direction="CLOCKWISE">
                <Stroke color="#FFD700" thickness="10" cap="ROUND" />
                <Transform target="endAngle" value="([BATTERY_PERCENT] / 100.0) * 45" />
            </Arc>
            <Variant mode="AMBIENT" target="alpha" value="0" />
        </PartDraw>

    </Scene>

</WatchFace>
